<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Daily Bible Verse</title>
</head>

<body>
    <div id="verse-container">
        <h2>Daily Bible Verse</h2>
        <p id="verse-content"></p>
    </div>

    <script>
        const API_KEY = 'ed1888c4b947db2e13d6acab4841fbd06340115b';

        function fetchBiblePassage() {
            const verseElement = document.getElementById("verse-content");

            fetch('https://api.esv.org/v3/passage/text/?q=Psalm+107:1', {
                headers: {
                    'Authorization': `Token ${API_KEY}`
                }
            })
                .then(response => response.json())
                .then(data => {
                    const passageText = data.passages[0].replace(/\[(\d+)\]/, ''); // Remove verse number reference from the passage
                    const verseReference = "Psalm 107:1 ESV"; // Correct verse reference for Psalm 107:1
                    const formattedText = `"${getVerseContent(passageText)}" - ${verseReference}`;
                    verseElement.textContent = formattedText;
                })
                .catch(error => {
                    console.error('Error fetching ESV passage:', error);
                    verseElement.textContent = "An error occurred while fetching the passage.";
                });
        }

        // Function to extract only the verse content without additional information
        function getVerseContent(text) {
            // Splitting the text by newline and keeping the second part (the actual verse content)
            const parts = text.split('\n');
            if (parts.length > 1) {
                return parts[1].trim(); // Return the trimmed verse content
            }
            return text; // Return the original text if splitting doesn't work as expected
        }

        // Call the function to fetch the Bible passage when the page loads
        fetchBiblePassage();

    </script>
</body>

</html>